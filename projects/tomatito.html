<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Noé Fernández - Projects - Tomatito</title>

  <!-- Bootstrap Core CSS -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Theme CSS -->
  <link href="../vendor/clean-blog/css/clean-blog.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="../css/style.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Nunito:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <link rel="icon" type="image/x-icon" href="../img/favicon.ico" />
  <link rel="icon" type="image/png" href="../img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="../img/favicon-16x16.png" sizes="16x16" />
</head>

<body>
  <button onclick="scrollToTop()" class="scrollTop-button" title="Go to top">Back to top</button>

  <!-- [_common] Navigation START -->
  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
      <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header page-scroll">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-bars"></i>
              </button>
              <a class="navbar-brand" href="../index.html">Noé Fernández</a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                  <li>
                    <a href="../index.html">Home</a>
                  </li>
                  <li>
                    <a href="index.html"> > Projects < </a>
                  </li>
                  <li>
                    <a href="blog/index.html">Blog</a>
                  </li>
                  <li>
                    <a href="#" data-toggle="modal" data-target="#contact-modal">Contact</a>
                  </li>
              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
  </nav>
  <!-- [_common] Navigation END -->

  <!-- [_common] Contact Modal START -->
  <div class="modal fade" id="contact-modal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h3 class="modal-title text-center">Contact</h3>
        </div>
        <div class="modal-body text-center">
          <h4> Email </h4>
          <h3><a class="contact-email" href="mailto:noe.fernandez@protonmail.com?Subject=Hello" target="_top"> noe.fernandez@protonmail.com </a></h3>

          <br>
          <h4></span> Networks </h4>
          <!-- THIS CONTENT MUST BE THE SAME THAT FOOTER CONTENT -->
          <ul class="list-inline text-center">
              <li>
                  <a href="https://github.com/nfdz" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
              <li>
                  <a href="https://www.linkedin.com/in/noe-fernandez/" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
              <li>
                  <a href="https://twitter.com/fdznoe" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
              <li>
                  <a href="https://medium.com/@nfdz" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-medium fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- [_common] Contact Modal END -->

  <!-- Page Header -->
  <!-- Set your background image for this header on the line below. -->
  <header class="intro-header" style="background-image: url('img/tomatito/project-bg.jpg')">
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <div class="post-heading">
                      <h1>Tomatito</h1>
                      <h2 class="subheading">One pomodoro application to rule them all, one technique to find your productivity</h2>
                  </div>
              </div>
          </div>
      </div>
  </header>

  <!-- Post Content -->
  <article>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <p>
                    This project consists of a very tiny application for time management according to the pomodoro technique and thus improving productivity.
                  </p>
                  <p>
                    The Pomodoro Technique is a time management method developed by Francesco Cirillo in the late 1980s.
                    The technique uses a timer to break down work into intervals, traditionally 25 minutes in length,
                    separated by short breaks. These intervals are named pomodoros, the plural in English of the Italian
                    word pomodoro (tomato), after the tomato-shaped kitchen timer that Cirillo used as a university student.
                    <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique" target="_blank">[1]</a>
                  </p>
                  <p>
                    There are six steps in the technique:
                  </p>
                  <ol>
                    <li>Decide on the task to be done.</li>
                    <li>Set the pomodoro timer (25 minutes).</li>
                    <li>Work on the task until the timer rings.</li>
                    <li>After the timer rings, put a checkmark.</li>
                    <li>If you have fewer than four checkmarks, take a short break (3-5 minutes), then go to step 2.</li>
                    <li>After four pomodoros, take a longer break (15-30 minutes), reset your checkmark count to zero, then go to step 1.</li>
                  </ol>

                  <h2 class="section-heading">Motivation</h2>

                  <p>
                    There are several applications on all platforms that are based on this technique.
                    The development of this project is not motivated to occupy a niche market.
                    This project is mainly due to educational reasons. I wanted to try different Android features that I had not yet used and
                    I needed to know before taking my certification exam. This was the perfect excuse to implement a
                    tiny and simple application with my approach of what a pomodoro timer should be.
                  </p>
                  <p>
                    The specific feature that I had not studied in my course of preparation for the exam
                    and I needed to know was the use of <i>AlarmManager</i> (quoted text from the website about the content of the exam):
                  </p>
                  <blockquote>
                    You must have knowledge of handling background services and schedule a task using AlarmManager.
                  </blockquote>
                  <p>
                    I thought it might be interesting to study and use this feature in a real application while reviewing other concepts before going to the exam.
                  </p>

                  <h2 class="section-heading">Concept</h2>

                  <p>In my opinion, the characteristics that a pomodoro application must have are:</p>
                  <ul>
                    <li>It must be very light in terms of the weight of the application and the memory it uses during its execution. Then: no heavy media files and few activities and fragments.</li>
                    <li>You must be able to interact with it without having to open the application. Then: use system notifications with actions.</li>
                    <li>Make it funny. Then: add animated gifs to the interface.</li>
                    <li>Keep a simple record with the latest pomodoros.</li>
                    <li>It must have settings to allow user modifying the times of the pomodoro technique.</li>
                  </ul>

                  <h2 class="section-heading">Implementation</h2>

                  <p>
                    The application has two activities (<i>MainActivity</i> and <i>SettingsActivity</i>) and two services (<i>AlarmService</i> and <i>PomodoroService</i>).
                  </p>
                  <p>
                    <i>MainActivity</i> is the activity that has got all visual information about pomodoros. Its layout consists mainly in a <i>ViewPager</i>
                    and a <i>BottomNavigationView</i>. The <i>ViewPager</i> could show two fragments (<i>PomodoroFragment</i> and <i>RecordsFragment</i>).
                    <i>PomodoroFragment</i> shows the state of the current pomodoro with a <i>ProgressBar</i> and a text timer.
                    <i>RecordFragment</i> shows the latest pomodoros in a sortered list in a <i>RecyclerView</i>.
                  </p>
                  <p>
                    <i>SettingsActivity</i> just shows <i>SettingsFragment</i>. It is a standard settings fragment because it extends <i>PreferenceFragment</i>.
                    It has to be careful to perform actions on the current pomodoro if user changes values of the preferences that affects it.
                  </p>
                  <p>
                    <i>AlarmService</i> is triggered by <i>AlarmManager</i> and it just sends a notification updating the information about current pomodoro state.
                    It uses intent action to resolve the type of the notification. It is important that it reschedule itself if needed.
                  </p>
                  <p>
                    <i>PomodoroService</i> manages ongoing pomodoro in an asynchronous and safe way. It is needed in order to handle current pomodoro without
                    open application, for example through notification actions. It uses intent action to resolve the operation to perform.
                  </p>
                  <p>
                    There is an util static class called <i>AlarmUtils</i> that I think that is very important because it contents all the logic to work with <i>AlarmManager</i>.
                    I highlight the following code that ensures correct behaviour in all versions:
                  </p>
                  <pre><code>
if (android.os.Build.VERSION.SDK_INT >= 19) {
    manager.setExact(AlarmManager.RTC_WAKEUP, state.stateUtcEndTime, operation);
} else {
    manager.set(AlarmManager.RTC_WAKEUP, state.stateUtcEndTime, operation);
}
                  </code></pre>

                  <h3>Persistence</h3>
                  <p>
                    For data storage on the one hand, a traditional SQLite embedded database has been used to save pomodoro records.
                    The definition of this database is located in the <i>Contract</i> class, the creation and update in <i>DbHelper</i> (that extends <i>SQLiteOpenHelper</i>)
                    and the access in <i>DatabaseManager</i>. On the other hand, shared preferences has been used to store user preferences and the current pomodoro start time.
                  </p>

                  <h3>Libraries</h3>
                  <p>The 3rd party software that I have used for the application are:</p>
                  <ul>
                    <li><a href="https://github.com/JakeWharton/timber" target="_blank">Timber</a>:
                      A logger with a small, extensible API which provides utility on top of Android's normal Log class. For example:
                    </li>
                    <pre><code>
Timber.d("Alarm service triggered, action: " + action);
                    </code></pre>
                    <li><a href="https://github.com/bumptech/glide" target="_blank">Glide</a>:
                      An image loading and caching library. It was the best option in order to use GIFs. For example:
                    </li>
                    <pre><code>
Glide.with(getContext())
     .load(R.raw.tomato_working)
     .into(mStateGif);
                    </code></pre>
                    <li><a href="https://github.com/JakeWharton/butterknife" target="_blank">Butter Knife</a>:
                      Bind Android views and callbacks to fields and methods. For example:
                    </li>
                    <pre><code>
@BindView(R.id.iv_pomodoro_state) ImageView mStateGif;
                    </code></pre>
                  </ul>

                  <h2 class="section-heading">Conclusion</h2>

                  <p>
                    This application was very easy to implement. I was able to settle learned knowledge and learn some new ones.
                    Coincidentally (I swear this is true), in my certification exam it was necessary to use <i>AlarmManager</i>
                    in order to send a notification at an exact moment of the day, so this training made me feel relaxed and
                    comfortable during the exam and it was a piece of cake.
                  </p>

                  <img class="img-responsive" src="img/tomatito/screenshots.png" alt="">
                  <span class="caption text-muted">Some screenshots</span>

                  <p>
                    I do not plan to add amazing features in the future, but feel free to contact me to suggest anything or report any bug.
                  </p>

                  <p>
                    The application is free software (GPLv3) and you can check the whole project in
                    <a href="https://github.com/nfdz/tomatito" target="_blank">github</a>.
                  </p>

                  <h3>Download</h3>

                  <ul>
                    <li><a href="https://play.google.com/store/apps/details?id=io.github.nfdz.tomatito" target="_blank">Google Play</a></li>
                    <li><a href="https://github.com/nfdz/tomatito/releases" target="_blank">Github</a></li>
                  </ul>

              </div>
          </div>
      </div>
  </article>

  <hr>

  <center><a href="index.html"><h3> ↩ More Projects </h3></a></center>

  <hr>

  <!-- [_common] Footer START -->
  <footer>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <ul class="list-inline text-center">
                      <li>
                          <a href="https://github.com/nfdz" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                      <li>
                          <a href="https://www.linkedin.com/in/noe-fernandez/" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                      <li>
                          <a href="https://twitter.com/fdznoe" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                      <li>
                          <a href="https://medium.com/@nfdz" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-medium fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                  </ul>
                  <p class="copyright text-muted">Copyright &copy; Noé Fernández 2017</p>
              </div>
          </div>
      </div>
  </footer>
  <!-- [_common] Footer END -->

  <!-- jQuery -->
  <script type="text/javascript" src="../vendor/jquery/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="../vendor/bootstrap/js/bootstrap.min.js"></script>

  <!-- Theme JavaScript -->
  <script type="text/javascript" src="../vendor/clean-blog/js/clean-blog.js"></script>

</body>

</html>
