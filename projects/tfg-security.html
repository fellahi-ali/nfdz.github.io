<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124183504-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-124183504-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="This page is about my bachelor's degree final project. It is about the provision of security in Data Distribution Service (DDS) middleware. This web page is a summary of all the work with a special focus on the design of the solution.">
  <meta name="keywords" content="Security,DDS,Provision of Security,C++,QT">
  <meta name="author" content="Noé Fernández">
  <meta name="robots" content="index,follow">

  <title>Project: Provision of Security in Data Distribution Service</title>

  <!-- Bootstrap Core CSS -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Theme CSS -->
  <link href="../vendor/clean-blog/css/clean-blog.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="../css/style.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Nunito:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <link rel="icon" type="image/x-icon" href="../img/favicon.ico" />
  <link rel="icon" type="image/png" href="../img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="../img/favicon-16x16.png" sizes="16x16" />

</head>

<body>
  <button onclick="scrollToTop()" class="scrollTop-button" title="Go to top">Back to top</button>

  <!-- [_common] Navigation START -->
  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
      <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header page-scroll">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-bars"></i>
              </button>
              <a class="navbar-brand" href="../index.html">Noé Fernández</a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                  <li>
                    <a href="../index.html">Home</a>
                  </li>
                  <li>
                    <a href="index.html"> > Projects < </a>
                  </li>
                  <li>
                    <a href="https://medium.com/@nfdz">Blog</a>
                  </li>
                  <li>
                    <a href="#" data-toggle="modal" data-target="#contact-modal">Contact</a>
                  </li>
              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
  </nav>
  <!-- [_common] Navigation END -->

  <!-- [_common] Contact Modal START -->
  <div class="modal fade" id="contact-modal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h3 class="modal-title text-center">Contact</h3>
        </div>
        <div class="modal-body text-center">
          <h4> Email </h4>
          <h3><a class="contact-email" href="mailto:noe.fernandez@protonmail.com?Subject=Hello" target="_top"> noe.fernandez@protonmail.com </a></h3>

          <br>
          <h4></span> Networks </h4>
          <!-- THIS CONTENT MUST BE THE SAME THAT FOOTER CONTENT -->
          <ul class="list-inline text-center">
              <li>
                  <a href="https://github.com/nfdz" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
              <li>
                  <a href="https://www.linkedin.com/in/noe-fernandez/" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
              <li>
                  <a href="https://twitter.com/nfdzls" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
              <li>
                  <a href="https://medium.com/@nfdz" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-medium fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- [_common] Contact Modal END -->

  <!-- Page Header -->
  <!-- Set your background image for this header on the line below. -->
  <header class="intro-header" style="background-image: url('img/project-template/project-bg.jpg')">
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <div class="post-heading">
                      <h1>Provision of security in data distribution service</h1>
                      <h2 class="subheading">Bachelor's degree final project</h2>
                  </div>
              </div>
          </div>
      </div>
  </header>

  <!-- Post Content -->
  <article>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                  <h2 class="section-heading">Index</h2>
                  <ul>
                    <li>
                      <a href="#introduction">Introduction</a>
                      <ul>
                        <li><a href="#dds-advantages">DDS Advantages</a></li>
                        <li><a href="#dds-example">DDS Example</a></li>
                        <li><a href="#security">Security</a></li>
                      </ul>
                    </li>
                    <li><a href="#motivation">Motivation</a></li>
                    <li>
                      <a href="#objectives">Objectives</a>
                      <ul>
                        <li><a href="#schedule">Schedule</a></li>
                      </ul>
                    </li>
                    <li>
                      <a href="#solution-design">Solution Design</a>
                      <ul>
                        <li><a href="#protocol">Protocol</a></li>
                        <li><a href="#key-management">Key Management</a></li>
                        <li><a href="#encryption">Encryption of data</a></li>
                      </ul>
                    </li>
                    <li><a href="#implementation">Implementation</a></li>
                    <li><a href="#test-and-evaluation">Test and Evaluation</a></li>
                    <li><a href="#conclusions">Conclusions</a></li>
                  </ul>
                  <hr>

                  <p id="introduction">
                    This project is the final work to complete my bachelor degree. It counts as two subjects, i.e.,
                    12 <a href="https://es.wikipedia.org/wiki/European_Credit_Transfer_and_Accumulation_System" target="_blank">ECTS</a>.
                    It is developed during the last four months of the course and for its evaluation it takes into account both the
                    document presented and its presentation and defense before a jury. The document must meet a number of requirements in
                    terms of length, format and content. The presentation should also be adjusted to a very rigid time interval and to the questions of jury.
                  </p>

                  <p>
                    The subject of my work was decided well in advance with my tutor so as to avoid making a last minute bad choice. I wanted my work to have
                    a little of all the topics that I liked the most during the study of the degree. These topics were: security, protocols and software.
                    So, thanks to the assistance of my tutor, I was able to choose a subject from among those available that year that fit perfectly with
                    my preferences. It is: Provision of security in distributed environments.
                  </p>

                  <p>
                    Briefly, it is about providing a security layer to a middleware for distributed data communication over
                    <a href="https://en.wikipedia.org/wiki/Internet_protocol_suite" target="_blank">TCP/IP</a>.
                    It is necessary to make a theoretical study, a solid design and a prototype of implementation. The provision of management software is
                    also proposed as an additional objective.
                  </p>

                  <p>
                    This middleware is called
                    <a href="https://en.wikipedia.org/wiki/Data_Distribution_Service" target="_blank">Data Distribution Service</a>.
                    It is known by the acronym DDS. It appeared in 2004 to meet the need of distributed network systems.
                    This technology works over the classic Internet protocols, standing as an interface layer between the transport and application
                    layers within the model of TCP/IP Internet reference. Such arrangement are achieving great success in the current scenario,
                    with the number of developers who use them is growing increasingly. DDS is utilised in critical communications, like the military,
                    and also in multimedia communications. This is possible because DDS has been developed from the initial design as a piece of powerful
                    and versatile middleware. The standard is regulated by the
                    <a href="https://en.wikipedia.org/wiki/Object_Management_Group" target="_blank">Object Management Group</a> (OMG).
                    It uses a <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern" target="_blank">publish-subscribe pattern</a>.
                    Although it should not be confused with a message-oriented middleware.
                  </p>

                  <p>
                    DDS technology does not provide any safety feature. This task has been left to software companies that sell this technology.
                    As for any other settings, the provision of security is also a critical aspect. This project tackles the design, development
                    and implementation of an alternative solution to other existing security for the provision of security issues in distributed environments.
                    It is intended to be accesible to anyone who needs to code a DDS system.
                  </p>

                  <p>
                    The project aims to solve this problem both from a theoretical and experimental point of view. It proposes an ideal design for a
                    system of this type and how to carry out the implementation. This implementation aims to study the problems of information security
                    in a real environment as well as getting a working prototype of the proposed design.
                  </p>

                  <h3 id="dds-advantages">DDS Advantages</h3>

                  <p>
                    DDS makes it easy for developers to use current commercial networks for the distribution of periodic data with strict quality of service parameters.
                    It is a more economical solution than the rest since it avoids the investment in new networks and components. In addition, it simplifies the integration
                    and management of real-time systems with other enterprise network systems. In general, it presents a series of advantages over its competitors:
                  </p>

                  <ul>
                    <li>Simplicity. It is based on the publish/subscribe pattern.</li>
                    <li>Versatility. It is suitable for high performance systems thanks to the protocol Real Time Stream Protocol, known by the acronym RTSP.</li>
                    <li>Guarantees quality of service. It can offer deliveries of data with deterministic times.</li>
                    <li>Dynamically scalable.</li>
                    <li>Efficient use of bandwidth.</li>
                    <li>Adaptable and open. It supports different communication protocols like unicast and multicast in the network layer.</li>
                    <li>Control of the system. It offers a good number of configurable parameters, giving developers a great deal of freedom when controlling their system.</li>
                  </ul>

                  <h3 id="dds-example">DDS Example</h3>

                  <p>
                    One of the most notable users of DDS is the Department of Defense of the United States of America and the main subcontracted companies linked
                    to this department. It is very important in such programs as Future Combat Systems, known by its acronym FCS. The main purpose of this program
                    is the creation of brigades equipped with new manned and unmanned vehicles connected to each other in an innovative fast and flexible network.
                  </p>

                  <p>
                    I am going to show a simplified example based on this real scenario. Unmanned vehicles may be subscribers and radars would be publishers.
                    The breakdown of this scenario would be:
                  </p>

                  <ul>
                    <li>A radar is an information publisher of targets.</li>
                    <li>A weapon is a publisher about the state of its arsenal and at the same time subscriber of command center orders.</li>
                    <li>A command center is a subscriber of the objectives and arsenal status information. In addition, it is a publisher of the orders.</li>
                  </ul>

                  <center><img class="img-responsive" src="img/tfg-security/dds-example.jpg" alt=""></center>
                  <span class="caption text-muted">Publish/Subscribe scheme in a military example</span>

                  <h3 id="security">Security</h3>

                  <p>
                    The field of information security is a good example of a science where the theoretical experts are confronted with the experimental ones.
                    This is due to the myth that encryption and information security are the same thing. Encryption is an essential component for information security,
                    but it is not everything. The encryption of a message can ensure that it travels through a network securely, but does not guarantee information
                    security between the point of origin and end. Security goes further than hiding the content of the message.
                  </p>

                  <p>
                    <a href="https://en.wikipedia.org/wiki/Information_security" target="_blank">Information security</a>, sometimes shortened to InfoSec,
                    is the practice of preventing unauthorized access, use, disclosure, disruption, modification, inspection, recording or destruction of information.
                  </p>

                  <p>
                    The basic principles of information security are derived from three basic services. These services known as the CIA Triad are a mandatory
                    requirement for the provision of information security services. The CIA Triad consists of confidentiality, integrity and availability services.
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/cia-triad.png" alt=""></center>
                  <span class="caption text-muted">CIA Triad</span>

                  <p>
                    Beyond these three services, there are others that are also very important. Following, there is a brief overview of the main security services known today:
                  </p>

                  <ul>
                    <li>Authentication. Ensure that the entity is really who it claims to be.</li>
                    <li>Authorization. Provide different levels of access to different parts or actions in a system.</li>
                    <li>Data Integrity. Ensure that during the transmission of data from one point to another these arrive at the destination intact without any modification.</li>
                    <li>Confidentiality. Restrict access to information only to authorized persons, preventing others from accessing such information.</li>
                    <li>Availability. Keep any resources available for authorized users when they need them.</li>
                    <li>Reliability. According to the ITU-T defines in document X.509: A first entity describes a second entity as reliable when the first entity is certain that the second entity will behave exactly as the first entity expected.</li>
                    <li>Non-repudiation. It is associated with the concept of reliability and is that the service is able to provide sufficient evidence of the integrity and source of the data. It should be possible to prove that the message was sent by a specific sender part (source non-repudiation) and that the message was received by a specific receiver part (destination non-repudiation).</li>
                    <li>Privacy. Guarantee to a person or entity that their data will not be revealed.</li>
                    <li>Identity Management. Associate unique credentials with the intention of determining the authenticity of the entity in the future. It is used to control access to any system or resource, associating the entity with rights and restrictions.</li>
                  </ul>

                  <h2 id="motivation" class="section-heading">Motivation</h2>

                  <p>
                    Information security in distributed systems is complex. Most of the developed security technologies are not valid. DDS does not include information
                    security mechanisms in its specification. It is not easy to design and implement security in a system of these characteristics because the huge number
                    of entities that form it and the complicated relationships between them. In addition, it have to achieve security without losing efficiency or affect
                    communications.
                  </p>

                  <p>
                    So far, companies that have needed a minimum level of security can choose to buy a commercial solution, develop security for their specific system or
                    ignore security. Using a DDS system with no security is acceptable in some cases, but never advisable. If the previous military example is deployed
                    without security, it could happen that an unauthorized intruder would access the system and perform harmful actions.
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/dds-no-security-example.jpg" alt=""></center>
                  <span class="caption text-muted">Military example scheme with no security</span>

                  <p>
                    It is not necessary to say that the United States Army uses its own DDS implementation with high level security. However, this dummy example shows
                    the scope of the consequences of not including security in DDS. The system looks helpless against someone who posts incorrect orders or collects information.
                  </p>

                  <h2 id="objectives" class="section-heading">Objectives</h2>

                  <p>
                    As it is an academic work, the objectives must be submitted after the study of the art and the analysis of the problem. In this way,
                    it is possible estimate needed time, real cost of the project and propose a project schedule. These objectives must be defined as requirements
                    or specifications. The requirements are separated into two categories: functional and non-functional.
                  </p>

                  <p>
                    The functional requirements refer to the behavior of the system. The tasks that the system must perform are inferred from them. The functional requirements are:
                  </p>

                  <ul>
                    <li>The system must guarantee at least three basic security services: confidentiality, integrity and authentication.</li>
                    <li>The system must provide enough tools for the correct management of system security.</li>
                    <li>At least, the management of cryptographic algorithms must be modular and extensible so that their modification does not affect
                      the correct operation of the system. In addition, it is desirable complain the arms trade treaty for different geographic areas,
                      as well as eases the inclusion of new cryptographic algorithms.</li>
                    <li>The system must comply with the strict real-time requirements of this type of system, without harming its performance in any case.</li>
                    <li>The system must work properly in at least one implementation of a DDS vendor.</li>
                  </ul>

                  <p>
                    The non-functional requirements refer to all requirements with no relation to security services and distributed systems. The non-functional requirements are:
                  </p>

                  <ul>
                    <li>The code should be extensible with the aim of eases future improvements.</li>
                    <li>The code must be reusable to be portable to multiple systems.</li>
                    <li>Libraries used must be optional and independent of the general system.</li>
                    <li>The system must be programmed in a language that works properly in several architectures, from embedded microprocessors to large servers.
                      In addition, the use of libraries and functions specific of an operating system should be avoided.</li>
                    <li>At least, the implementation should be able to build with the GNU GCC and run successfully on Linux systems in order to not restrict the
                      execution and test to any commercial license.</li>
                  </ul>

                  <h3 id="schedule">Schedule</h3>

                  <p>
                    In order to tackle a project of this magnitude it is necessary to divide the work into different tasks and associate each one with a time
                    for its accomplishment. The main tasks are:
                  </p>

                  <ul>
                    <li>Study of the state of the art. This task aims to familiarize with the context of the project, to study the background of the problem and to know the solutions that exist today.</li>
                    <li>Design of the optimal solution. This task includes all the theoretical study and development necessary to solve the problem.</li>
                    <li>Implementation of the prototype of the optimal solution. This task includes all the development work necessary to accomplish a valid implementation of the solution.</li>
                    <li>Test and evaluation. This task includes all the tests and evaluations of the solution implemented in real environments.</li>
                    <li>Documentation of the project. This task includes everything related to the preparation of the project document and presentation.</li>
                  </ul>

                  <center><img class="img-responsive" src="img/tfg-security/schedule.png" alt=""></center>
                  <span class="caption text-muted">Gantt chart of planned tasks</span>

                  <h2 id="solution-design" class="section-heading">Solution Design</h2>

                  <p>
                    Firstly, it is necessary to make a complete study of the target environment to be able to make an optimal design, giving special interest to the vendor
                    OpenDDS because I am going to focus on the project. You have to know the possible scenarios and agents involved. It is important to be clear where to
                    place the security module within the scheme of a distributed system. The possible scenarios are:
                  </p>

                  <ul>
                    <li>Join a domain.</li>
                    <li>Creating a topic within a domain.</li>
                    <li>Creating and adding a publication to an existing topic.</li>
                    <li>Creating and adding a subscription to an existing topic.</li>
                    <li>Data transfer. Publishers to subscribers.</li>
                  </ul>

                  <p>
                    The agents involved are called clients and repositories. Clients are the common agents who want to send or receive data. Repositories are
                    special agents inherent of the implementation of DDS. OpenDDS uses a centralized daemon, with the possibility of being federated, called
                    OpenDDS InfoRepo that manages and controls the system. It is important the possibility of federate OpenDDS processes because it can keep
                    available the service operation uninterruptedly. In a federated scenario, the failure of an InfoRepo process is transparent to both the
                    publisher and the subscriber. It also allows load balancing.
                  </p>

                  <p>
                    InfoRepo is a key point of convergence in the system. If you want to add security to OpenDDS, the InfoRepo server is an optimal place for security management.
                    For control and management operations, OpenDDS implements an SSL-type connection called SSLIOP, which is basically the implementation of the transport security
                    technology type TAO (the CORBA implementation used in OpenDDS).
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/opendds-scheme.png" alt=""></center>
                  <span class="caption text-muted">OpenDDS scheme</span>

                  <p>
                    As regards the repository agent, it must have configuration files for the proposed security module (algorithms, ports, etc).
                    The administration must have easy and powerful tools for the security management.
                  </p>

                  <p>
                    As regards the client agent, it must have configuration files also. It must execute the module when it needs to access a protected resource.
                    The client just has to pass the data to the module being all the underlying processes transparent to it.
                  </p>

                  <p>
                    The security module is responsible for locating the resource in the hierarchical network of security servers, authorizing access to the client,
                    providing the credentials of the specific topic and the other necessary security functions (data integrity, non-repudiation, etc).
                    It must work with the OpenDDS system but not affect it in any way.
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/opendds-scheme-with-security.png" alt=""></center>
                  <span class="caption text-muted">OpenDDS with security module scheme</span>

                  <p>
                    An example is worth a thousand words and to explain how the configuration file is more than enough. Sample client configuration file:
                  </p>
                  <pre><code>
[SecuRepo]
name=siteA
PubKey=./client1/pubkey
PriKey=./client1/prikey
serverPort=13000
serverIP=192.168.1.2
serverPubKey=./pubkeyrepo
[algorithms]
hash=md5
symmetric=DES
asymmetric=AES
                  </code></pre>

                  <p>
                    Sample repository configuration file:
                  </p>

                  <pre><code>
[SecuRepo]
name=granada
nameDB=database.db
serverPort=13000
serverPriKey=./prikey
serverPubKey=./pubkey
topIP=192.168.1.1
topPo rt =12000
topPubKey =./pubkeyTop
[algorithms]
hash=md5
symmetric=DES
asymmetric=AES
                  </code></pre>

                  <p>
                    The security module of a repository agent handles a large amount of data. The volume of data can be important and the management of the data is
                    a fundamental part of the security server. Data management is vital for the security module because thanks to it can be provided the authorization
                    service. According to the previous study of the scenarios and agents, the data can be divided into four types:
                  </p>

                  <ul>
                    <li>Publishers</li>
                    <li>Subscribers</li>
                    <li>Topics</li>
                    <li>Relationships between publishers and subscribers</li>
                  </ul>

                  <p>
                    To store the data, module will use a MySQL relational database because it is mature, secure and very common in server systems.
                    This type of database is very powerful and has great benefits in managing and accessing data. The access is made in a controlled and synchronized way,
                    protecting at all the time the integrity of the data. To ease the administration of the database, a tiny graphical application is proposed.
                    The database will contain the following tables:
                  </p>

                  <ul>
                    <li>Publisher</li>
                    <li>Subscriber</li>
                    <li>Topic</li>
                    <li>Publisher_has_Topic</li>
                    <li>Topic_has_Subscriber</li>
                  </ul>

                  <center><img class="img-responsive" src="img/tfg-security/db-scheme.png" alt=""></center>
                  <span class="caption text-muted">Database scheme developed with <a href="https://www.mysql.com/products/workbench/" target="_blank">MySQL Workbench</a></span>

                  <h3 id="protocol">Protocol</h3>

                  <p>The network protocol defined for the security module is divided into stages to simplify its definition.</p>

                  <p>
                    To describe a message exchange a message sequence chart (commonly known by its acronym MSC) is used, where the interaction between the two entities
                    is easily observed. On the other hand, to ensure that the protocol is integral and secure, its states and transitions diagram is made.
                    The states identify the status of each entity in the network protocol. Transitions specify the change from one state to another triggered by an event.
                    An action also triggers with the transition. Finally, to verify this state diagram, a model-based analysis is performed, determining that there are no
                    dead spots or vulnerabilities that could be exploited by an attacker.
                  </p>

                  <p>
                    The protocol is invoked each time the client needs to do some operation on the system. You can perform all the operations you want and, once done,
                    close the session and the protocol. The protocol does not wait for new operations; If it is necessary to operate again it is invoked from the beginning.
                    The operations appear sporadically in time, so it is neither efficient nor necessary to keep a session open at all times by the client.
                  </p>

                  <p>The protocol stages are as follows:</p>

                  <ul><li>
                    Handshake. This is the first stage of the system. Before entering this stage there are an unknown client and a repository connected without any security.
                    At the end, there are an authenticated client and a secure session for communications between the client and the repository.
                    When the client is authenticated and protected with a session after the handshake it already has access to the rest of operations.
                  </li></ul>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-handshake-msc.png" alt=""></center>
                  <span class="caption text-muted">Handshake message sequence chart</span>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-handshake-states.png" alt=""></center>
                  <span class="caption text-muted">Handshake states and transitions diagram</span>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-handshake-verification.png" alt=""></center>
                  <span class="caption text-muted">Handshake states and transitions verification</span>

                  <ul><li>
                    Create a topic. This topic is created with minimal access restrictions and would be accessible for reading and writing to any client of the system.
                    This operation does not take care of the administration of privileges and authorizations of the topic because this is managed in the repository
                    security module. The importance of this operation is that it enables the security module to work with dynamic topics created at run time,
                    with a minimum level of security.
                  </li></ul>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-create-topic-msc.png" alt=""></center>
                  <span class="caption text-muted">Create topic message sequence chart</span>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-create-topic-states.png" alt=""></center>
                  <span class="caption text-muted">Create topic states and transitions diagram</span>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-create-topic-verification.png" alt=""></center>
                  <span class="caption text-muted">Create topic states and transitions verification</span>

                  <ul><li>
                    Join a topic. This stage is required to get the symmetric key which the topic associated data is encrypted. In this process the
                    client requests to join the group of entities that manages the key linked to the topic.
                  </li></ul>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-join-topic-msc.png" alt=""></center>
                  <span class="caption text-muted">Join topic message sequence chart</span>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-join-topic-states.png" alt=""></center>
                  <span class="caption text-muted">Join topic states and transitions diagram</span>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-join-topic-verification.png" alt=""></center>
                  <span class="caption text-muted">Join topic states and transitions verification</span>

                  <h3 id="key-management">Key Management</h3>

                  <p>
                    This is a key feature of this project. The key must change dynamically as members join the issue to provide backward security
                    (data exchanged before new member joins is illegible for the new member) and security forward (data exchanged after the exit of
                    a member are illegible for him). This technique is known as Forward and Backward Secrecy.
                  </p>

                  <p>
                    There are several techniques for Group Key Management (GKM). These techniques study how to update and distribute the cryptographic
                    keys during the lifetime of the group, with special emphasis on the problems of scalability and dynamism.
                  </p>

                  <p>
                      After analyzing the different solutions for this problem, I think that the best algorithm is Logical Key Hierarchy (LKH).
                      This algorithm reduces the number of messages needed to update the group keys. In addition, it minimizes the amount of memory
                      required in each node to hold the keys. It is thus achieved to considerably reduce the topic symmetric key refresh latency of the group.
                  </p>

                  <p>
                    This technique is the de facto standard and consists of a logical tree of keys. There are two types of keys,
                    the Session Encryption Keys (SEK) and Key Encryption Keys (KEK). SEKs are used to encrypt the data that the group exchanges.
                    The KEKs are used to encrypt the intermediate keys that the different members of the group will need to obtain the SEKs.
                    Usually, KEKs are organized into binary trees where each member of the group is placed in a tree node whose key only knows
                    the member that is in it. There are many variations of the LKH algorithm, although basic LKH is enough for this project.
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/LKH-tree-example.png" alt=""></center>
                  <span class="caption text-muted">LKH tree example</span>

                  <p>LKH member join resolution:</p>

                  <ol>
                    <li>When a member requests join to the group, KS places the member on an available node within the tree.</li>
                    <li>Provide a KEK key to the new node.</li>
                    <li>
                      The keys of the upper nodes of new node are changed:
                      <ul>
                        <li>The new node and its 'brothers' receive the new key of the parent node (immediately above).</li>
                        <li>The remaining nodes that have changed their keys send a group message (multicast) with their new keys encrypted with keys of their children.</li>
                      </ul>
                    </li>
                    <li>The new topic key SEK is sended with an encrypted group message (multicast) with the root key SEK (KS).</li>
                  </ol>

                  <center><img class="img-responsive" src="img/tfg-security/LKH-tree-join-example.png" alt=""></center>
                  <span class="caption text-muted">LKH join node example</span>

                  <p>LKH member exit resolution:</p>

                  <ol>
                    <li>A member is dropped when it explicitly requested or when it does not reply to keep alive messages.</li>
                    <li>
                      The keys of the upper nodes of removed node are changed:
                      <ul>
                        <li>Its 'brothers' must receive the new key of the parent node (immediately above).</li>
                        <li>The remaining nodes that have changed their keys send a group message (multicast) with their new keys encrypted with keys of their children.</li>
                      </ul>
                    </li>
                    <li>The new topic key SEK is sended with an encrypted group message (multicast) with the root key SEK (KS).</li>
                  </ol>

                  <center><img class="img-responsive" src="img/tfg-security/LKH-tree-exit-example.png" alt=""></center>
                  <span class="caption text-muted">LKH exit node example</span>

                  <h4>LKH member join protocol</h4>

                  <p>
                    For the operation of this algorithm it is necessary a network mechanism for the adhesion of the new members. When an entity joins a topic,
                    the server knows the following information: public key, private session key, entity type (publisher/subscriber), address and port on which
                    the client is listening while waiting for the events in the group.
                  </p>

                  <p>
                    After this protocol step, the client security module would already be attached to the group and located in a node of the LKH tree.
                    All other network operations are presented as commands or commands.
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/protocol-LKH-join-msc.png" alt=""></center>
                  <span class="caption text-muted">LKH join message sequence chart</span>

                  <h3 id="encryption">Encryption of data</h3>

                  <p>
                    This operation is performed simultaneously to the key management of the group. The key management task is responsible for updating the symmetric
                    key known to the client. When it is necessary to encrypt data to the distributed system, the client queries the key that has the key manager
                    and encrypts the information. For the decryption of information is done in a similar way. Both mechanisms are necessary for the correct functioning
                    of the system. For example, if the key manager fails, the encryption and decryption of the data would always be done with an incorrect key and the
                    information sent would be unreadable.
                  </p>

                  <p>
                    To protect integrity and ensure non-repudiation of data, publishers sign the hash of the data they have sent to the distributed system.
                    In this way, the subscribing entities know with certainty that the information has remained unchanged and that it comes from a
                    publisher authorized by the system. If the subscriber does not know the public key of the publisher, it can ask it to the repository.
                    If this process finish successfully, the decryption is completed and evaluated satisfactorily. If not, it means the publisher is not
                    authorized and the data is automatically discarded.
                  </p>

                  <h2 id="implementation" class="section-heading">Implementation</h2>

                  <p>
                    The implementation of the prototype is not important here and it needs a high level of detail for its comprehension. Therefore, we will try
                    to summarize a general idea of ​​it without going into implementation details.
                  </p>

                  <p>
                    Once again, the security module is again split into two agents: the repository and the client. For the implementation of these two
                    agents, three independent development lines are proposed. The first call SecuRepoDDS, refers to the part of the module located
                    on the security server. The second SecuClientDDS call refers to the part of the module located in the publisher/subscriber entity.
                    The third, called SecuRepoManager, refers to the security server module manager.
                  </p>

                  <center><img class="img-responsive" src="img/tfg-security/opendds-scheme-with-security-implementation.png" alt=""></center>
                  <span class="caption text-muted">OpenDDS with security module implementation scheme</span>

                  <p>
                    The chosen programming language was C++ because it has several advantages that make it suitable for this project.
                    To ensure maximum portability, it used only the standard C++ libraries and some open-source and multi-platform libraries.
                    For the use of lower-level characteristics, the POSIX family of standards shall be followed.
                    <a href="https://botan.randombit.net/" target="_blank">Botan</a> has been used as a cryptographic library.
                  </p>

                  <p>
                    In order to face the implementation of the module it is necessary to continue uncoupling the different elements of these development lines.
                    Common components are defined between the three applications, making development more efficient.
                  </p>

                  <p>
                    SecuRepoManager has a security module administration interface. For the implementation of the graphical interface has been used QT,
                    a cross-platform library widely used in today's market. It is developed in C++ so the integration is direct.
                    The interface consists of a window that contains a block of tabs, there being inside each tab a type of operation on
                    the data of the system. The interface is defined in an XML file using QtCreator as IDE. This application is independent of
                    the other blocks of the system.
                  </p>

                  <h2 id="test-and-evaluation" class="section-heading">Test and Evaluation</h2>

                  <p>
                    It is performed several tests in order to verify that the development has been carried out correctly and that it reaches the objectives.
                    Of course, during development the project has been tested to different to verify its progress, but so far the whole system has not been tested.
                    Thanks to this set of different tests, a complete diagnosis of the result can be made, evaluating whether the initial proposed goals have been achieved.
                  </p>

                  <p>
                    First, the operation of the administration interface is fully tested, trying to show that each and every one of the available options works.
                    Next, the correct operation of the implemented key management algorithm based on the LKH tree is tested. To do this,
                    we analyze what happens in the repository of the security module when ten clients adhere to the same group neatly.
                    Finally, a study of the operation of the entire module is performed, analyzing what happens after each event
                    with <a href="https://www.wireshark.org/" target="_blank">Wireshark</a>.
                  </p>

                  <h2 id="conclusions" class="section-heading">Conclusions</h2>

                  <p>
                    Finally, an explicit analysis of the scope of the objectives is done in order to find out if initial goals has been achieved:
                  </p>

                  <ul>
                    <li>
                      Provision of basic security services.
                      <ul>
                        <li>Authentication. Achieved by making use of asymmetric keys, where a client has one pair and a repository another one.
                          The repository has stored public keys of the clients and maybe some information about them.</li>
                        <li>Authorization. Associated with the public key of a client there is information about the permissions on the resources that it possesses.
                          This information is stored efficiently in a relational SQL database.</li>
                        <li>Integrity of the data. Achieved through the use of hash functions. It operates before sending data and after when the hash is calculated
                          again and checked. The hash code is protected with the credentials of the clients so that it remains unchanged. This process is known as digital signature.</li>
                        <li>Availability. Achieved thanks to the architecture of distributed systems of DDS. Such a system has de facto the highest standards of availability and rigid control over QoS and real-time parameters.</li>
                        <li>Non-repudiation. Achieved by signing the data with the credentials of the publisher. The non-repudiation of destination is not guaranteed a priori,
                          since these systems are not connection oriented and cannot have a large number of target entities, lacking this service.</li>
                      </ul>
                    </li>
                    <li>Identity management. Achieved thanks to the design and implementation of a powerful graphical interface that connects to a
                      database of the security server. The design of this interface is oriented towards the control and management of a distributed
                      system of type DDS, allowing the efficient administration of systems with a great number of entities.</li>
                    <li>Optimum key management. Achieved thanks to the design of an algorithm based on LKH. This algorithm reacts correctly to the
                      events of the DDS system, reducing the bandwidth and latency associated with the key management task in multicast groups.</li>
                    <li>Fast deployment. Achieved making use of specific builders and installers that automate the process.</li>
                    <li>Modular design. Achieved with special focus on the security module to ease integration with new algorithms in the future and enable compliance with the international arms treaty.</li>
                  </ul>

                  <p>
                    Personally the project has been a big challenge. Before the accomplishment of the project, I did not know DDS systems and neither how the
                    security services are in these systems. I had never executed a project of such magnitude before and it is a great professional and academic experience.
                    The presentation and evaluation of the project was very good. The jury congratulated the work and it was the second best of my promotion.
                  </p>

                  <p>
                    In this website I do not intend to develop the full document, I have tried to summarize everything and focus on the most interesting
                    details in my opinion. If there is any term that you think may be interesting to detail more or you have any questions, please do not
                    hesitate to contact me.
                  </p>

              </div>
          </div>
      </div>
  </article>

  <hr>

  <center><a href="index.html"><h3> ↩ More Projects </h3></a></center>

  <hr>

  <!-- [_common] Footer START -->
  <footer>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <ul class="list-inline text-center">
                      <li>
                          <a href="https://github.com/nfdz" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                      <li>
                          <a href="https://www.linkedin.com/in/noe-fernandez/" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                      <li>
                          <a href="https://twitter.com/nfdzls" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                      <li>
                          <a href="https://medium.com/@nfdz" target="_blank">
                              <span class="fa-stack fa-lg">
                                  <i class="fa fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-medium fa-stack-1x fa-inverse"></i>
                              </span>
                          </a>
                      </li>
                  </ul>
                  <p class="copyright text-muted">Copyright &copy; Noé Fernández 2017</p>
              </div>
          </div>
      </div>
  </footer>
  <!-- [_common] Footer END -->

  <!-- jQuery -->
  <script type="text/javascript" src="../vendor/jquery/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="../vendor/bootstrap/js/bootstrap.min.js"></script>

  <!-- Theme JavaScript -->
  <script type="text/javascript" src="../vendor/clean-blog/js/clean-blog.js"></script>

</body>

</html>
